<div class="page-header">
    <h1 id='Header'> Административный интерфейс </h1>
	<p>{{currentPage}}</p>
    </div>
    <div class="panel">
        <div class="form-inline">
			<div class="form-group">
                <div class="col-md-offset-2 col-md-8">
					<a href="#AdvertForm">
						<button class="btn btn-default" (click)="advertFormPop()">Добавить</button>
					</a>
                </div>
			</div>
			<div class="form-group">
				<div class="col-md-offset-2 col-md-8">
					<label class="col-md-8">Пользователь</label>
				</div>
			</div>
			<div class="form-group">
				<input class="form-control" type='text' [(ngModel)]='userSearch' (change)="Filter()"/>
			</div>
			<div class="form-group">
					<label class="col-md-6">от</label>
			</div>
			<div class="form-group">
					<input type="date" [(ngModel)]="startDate" (change)="Filter()"/>
			</div>
			<div class="form-group">
				<label class="col-md-6">до</label>
			</div>
			<div class="form-group">
					<input type="date" [(ngModel)]="endDate" (change)="Filter()"/>
			</div>
            <div class="form-group">
                <div class="col-md-8">
                    <input class="form-control" [(ngModel)]="search" placeholder = "Общий поиск" (change)="Filter()"/>
                </div>
            </div>
			<div class="form-group">
				<select class="form-control" [(ngModel)]="rowsShowed" value='10' (click)="rowsShowedChange()" (change)="Filter()">
					<option>10</option>
					<option>25</option>
					<option>50</option>
					<option>100</option>
				</select>
			</div>
        </div>
        <table class="table table-striped advertTable">
            <thead>
                <tr>
                    <th (click)="numberSort()" title="Отсортировать по номеру" class="sorter">Номер</th>
                    <th (click)="dateSort()" title="Отсортировать по дате" class="sorter">Создано</th>
                    <th>Объявление</th>
					<th (click)="ratingSort()" title="Отсортировать по рейтингу" class="sorter">Рейтинг</th>
					<th>Пользователь</th>
                </tr>
            </thead>
            <tbody (click)="advertFormPop()">
				<tr *ngFor="let advert of advertsToShow" (click)="changeAdvert(advert)">
                    <td>{{advert.num}}</td>
                    <td>{{advert.date}}</td>
					<td>{{advert.text}}</td>
					<td>{{advert.rating}}</td>
					<td>{{advert.user}}</td>
                </tr>
				<tr *ngFor="let empty of empty">
					<td>&nbsp;</td>
                    <td>&nbsp;</td>
					<td>&nbsp;</td>
					<td>&nbsp;</td>
					<td>&nbsp;</td>
				</tr>
            </tbody>
        </table>
		<div class="form-inline pages">
			<div class="form-group">
				<div class="col-md-1">
					<button class="btn btn-default" id="backButton" (click)="currentPageDecr()" style="display:none">Назад</button>
				</div>
			</div>
			<div class="form-group">
				<div class="col-md-1">
					<button class="btn btn-default">{{currentPage}}</button>
				</div>
			</div>
			<div class="form-group">
				<div class="col-md-1">
					<button class="btn btn-default" id="forthButton" (click)="currentPageIncr()">Вперед</button>
				</div>
			</div>
			<div class="form-group">
				<div class="col-md-1">
					<p>...</p>
				</div>
			</div>
			<div class="form-group">
				<div class="col-md-1">
					<button class="btn btn-default" (click)="endPageJmp()" (click)="Filter()">100</button>
				</div>
			</div>
		</div>
    </div>

	<div class='advertForm panel' id='advertForm'>
		<a name="AdvertForm">
      <h4>Объявление</h4>
    </a>
		<div class='linegroupBox'>
			<div class='linegroup'>
				<div class='box'>
					<div class='param'><p style='font-weight:bold'>Номер</p></div>
					<div><input id='number1' type='number' [(ngModel)]='num' value='{{num}}' min='1' pattern='[0-9]{,5}'/></div>
				</div>
			</div>
			<div class='linegroup'>
				<div class='box'>
					<div class='param'><p style='font-weight:bold'>Создано</p></div>
					<div><input id='date1' type='date' [(ngModel)]='date' value='{{date}}'/></div>
				</div>
			</div>
			<div class='linegroup'>
				<div class='box'>
					<div class='param'><p style='font-weight:bold'>Пользователь</p></div>
					<div>
						<input id='user1' type='text' list='names' [(ngModel)]='user' value='{{user}}' required/>
						<datalist id='names'>
							<option *ngFor="let user of users">{{user.name}}</option>
						</datalist>
					</div>
				</div>
			</div>
			<div class='linegroup'>
				<div class='box'>
					<div class='param' align='top'><p style='font-weight:bold'>Текст</p></div>
					<div>
						<textarea id='text1' rows="6" cols="45" name="text" [(ngModel)]='text' value='{{ad}}' required></textarea>
					</div>
				</div>
			</div>
			<div class='linegroup'>
				<div class='box'>
					<div class='param'><p style='font-weight:bold'>Рейтинг</p></div>
					<div>
						<select id='rate1' type='number' [(ngModel)]='rating' value='{{rate}}'>
							<option>1</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5</option>
							<option>6</option>
							<option>7</option>
							<option>8</option>
							<option>9</option>
							<option>10</option>
						</select>
					</div>
					<div class='hint'>
						<p>от 1 до 10</p>
					</div>
				</div>
			</div>
			<div class='linegroup linegroup-lowest'>
				<div class='box'>
					<div class='form-btn-container'>
						<button (click)='deleteAdvert()' class='btn btn-delete' (click)="Filter()">Удалить</button>
					</div>
					<div>
						<a href="#Header">
							<button class='btn btn-default' (click)='addAdvert(num,user,text,rating,date)' (click)="Filter()">Добавить новую запись</button>
						</a>
					</div>
					<div>
						<button class='btn btn-default' (click)='advertFormHide()'>Отменить</button>
					</div>
				</div>
			</div>
		</div>
	</div>
